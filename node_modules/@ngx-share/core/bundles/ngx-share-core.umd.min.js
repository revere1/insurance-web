!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/operators/map"),require("rxjs/operators/delay"),require("@fortawesome/free-brands-svg-icons"),require("@fortawesome/free-solid-svg-icons"),require("rxjs/BehaviorSubject"),require("@angular/common"),require("@angular/common/http"),require("rxjs/operators/catchError"),require("rxjs/operators/take"),require("rxjs/operators/switchMap"),require("rxjs/operators/tap"),require("rxjs/operators/filter"),require("rxjs/observable/empty"),require("rxjs/observable/of")):"function"==typeof define&&define.amd?define("@ngx-share/core",["exports","@angular/core","rxjs/operators/map","rxjs/operators/delay","@fortawesome/free-brands-svg-icons","@fortawesome/free-solid-svg-icons","rxjs/BehaviorSubject","@angular/common","@angular/common/http","rxjs/operators/catchError","rxjs/operators/take","rxjs/operators/switchMap","rxjs/operators/tap","rxjs/operators/filter","rxjs/observable/empty","rxjs/observable/of"],e):e((t["ngx-share"]=t["ngx-share"]||{},t["ngx-share"].core={}),t.ng.core,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.freeBrandsSvgIcons,t.freeSolidSvgIcons,t.Rx,t.ng.common,t.ng.common.http,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable,t.Rx.Observable)}(this,function(t,e,r,o,n,i,s,a,p,c,u,l,h,d,m,f){"use strict";function g(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return s}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}var y=new e.InjectionToken("CONFIG");function w(t){return t&&"object"==typeof t&&!Array.isArray(t)}function v(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return t;var o,n,i=e.shift();if(w(t)&&w(i))for(var s in i)w(i[s])?(t[s]||Object.assign(t,((o={})[s]={},o)),v(t[s],i[s])):Object.assign(t,((n={})[s]=i[s],n));return v.apply(void 0,b([t],e))}function x(t){var e=document.querySelector('meta[property="'+t+'"]');return e?e.getAttribute("content"):undefined}var k=[r.map(function(t){var e=t.prop.share[t.os];if(e){var r=t.prop.share.metaTags,o=t.metaTags,n="";return r&&(n=Object.entries(r).map(function(t){var e=g(t,2),r=e[0],n=e[1];return o[r]?n+"="+encodeURIComponent(o[r]):""}).join("&")),e+n}})],j=[r.map(function(){return window.print()})],S=[r.map(function(t){t.renderer.setStyle(t.el,"pointer-events","none"),t.temp={text:t.prop.text,icon:t.prop.icon};var e,r,o=decodeURIComponent(t.metaTags.url);return(e=o,r="ios"===t.os,new Promise(function(t){var o=document.createElement("textarea");if(o.value=e,document.body.appendChild(o),r){var n=document.createRange();n.selectNodeContents(o);var i=window.getSelection();i.removeAllRanges(),i.addRange(n),o.readOnly=!0,o.setSelectionRange(0,999999)}else o.select();document.execCommand("copy"),document.body.removeChild(o),t()})).then(function(){t.prop.text=t.prop.successText,t.prop.icon=t.prop.successIcon})["catch"](function(){t.prop.text=t.prop.failText,t.prop.icon=t.prop.failIcon}).then(function(){return t.cd.markForCheck()}),t}),o.delay(2e3),r.map(function(t){t.renderer.setStyle(t.el,"pointer-events","auto"),t.prop.text=t.temp.text,t.prop.icon=t.temp.icon,t.cd.markForCheck()})],O=[r.map(function(t){var e=t.metaTags.description,r=t.metaTags.url;return v(t,{metaTags:{description:e?e+"\r\n"+r:r}})})],T=[r.map(function(t){return+t.share.share_count})],C=[r.map(function(t){return JSON.parse(t.replace(/^receiveCount\((.*)\)/,"$1"))}),r.map(function(t){return+t.count})],P=[r.map(function(t){return+t.response.note_count})],I=[r.map(function(t){return+t.data.children[0].data.score})],B={facebook:{type:"facebook",text:"Facebook",icon:n.faFacebookF,color:"#4267B2",share:{desktop:"https://www.facebook.com/sharer/sharer.php?",android:"https://www.facebook.com/sharer/sharer.php?",ios:"https://www.facebook.com/sharer/sharer.php?",operators:k,metaTags:{url:"u"}},count:{request:"http",url:"https://graph.facebook.com?id=",operators:T}},twitter:{type:"twitter",text:"Twitter",icon:n.faTwitter,color:"#00acee",share:{desktop:"https://twitter.com/intent/tweet?",android:"https://twitter.com/intent/tweet?",ios:"https://twitter.com/intent/tweet?",operators:k,metaTags:{url:"url",description:"text",tags:"hashtags",via:"via"}}},google:{type:"google",text:"Google+",icon:n.faGooglePlusG,color:"#DB4437",share:{desktop:"https://plus.google.com/share?",android:"https://plus.google.com/share?",ios:"https://plus.google.com/share?",metaTags:{url:"url"},operators:k}},linkedin:{type:"linkedin",text:"LinkedIn",icon:n.faLinkedinIn,color:"#006fa6",share:{desktop:"http://www.linkedin.com/shareArticle?",android:"http://www.linkedin.com/shareArticle?",ios:"http://www.linkedin.com/shareArticle?",operators:k,metaTags:{url:"url",title:"title",description:"summary"}}},pinterest:{type:"pinterest",text:"Pinterest",icon:n.faPinterestP,color:"#BD091D",share:{desktop:"https://in.pinterest.com/pin/create/button/?",android:"https://in.pinterest.com/pin/create/button/?",ios:"https://in.pinterest.com/pin/create/button/?",operators:k,metaTags:{url:"url",description:"description",image:"media"}},count:{request:"http",url:"https://api.pinterest.com/v1/urls/count.json?url=",args:{responseType:"text"},operators:C}},reddit:{type:"reddit",text:"Reddit",icon:n.faRedditAlien,color:"#FF4006",share:{desktop:"http://www.reddit.com/submit?",android:"http://www.reddit.com/submit?",ios:"http://www.reddit.com/submit?",operators:k,metaTags:{url:"url",title:"title"}},count:{request:"http",url:"https://buttons.reddit.com/button_info.json?url=",operators:I}},tumblr:{type:"tumblr",text:"Tumblr",icon:n.faTumblr,color:"#36465D",share:{desktop:"http://tumblr.com/widgets/share/tool?",android:"http://tumblr.com/widgets/share/tool?",ios:"http://tumblr.com/widgets/share/tool?",operators:k,metaTags:{url:"canonicalUrl",description:"caption",tags:"tags"}},count:{request:"jsonp",url:"https://api.tumblr.com/v2/share/stats?url=",operators:P}},whatsapp:{type:"whatsapp",text:"WhatsApp",icon:n.faWhatsapp,color:"#25D366",share:{desktop:"https://web.whatsapp.com/send?",android:"whatsapp://send?",ios:"whatsapp://send?",operators:b(O,k),metaTags:{description:"text"}}},messenger:{type:"messenger",text:"Messenger",icon:n.faFacebookMessenger,color:"#0080FF",share:{android:"fb-messenger://share/?",ios:"fb-messenger://share/?",operators:k,metaTags:{url:"link"}}},telegram:{type:"telegram",text:"Telegram",icon:n.faTelegramPlane,color:"#0088cc",share:{desktop:"https://t.me/share/url?",android:"https://t.me/share/url?",ios:"https://t.me/share/url?",operators:k,metaTags:{url:"url",description:"text"}}},vk:{type:"vk",text:"VKontakte",icon:n.faVk,color:"#4C75A3",share:{desktop:"http://vk.com/share.php?",android:"http://vk.com/share.php?",ios:"http://vk.com/share.php?",operators:k,metaTags:{url:"url"}}},stumble:{type:"stumble",text:"Stumble",icon:n.faStumbleupon,color:"#eb4924",share:{desktop:"http://www.stumbleupon.com/submit?",android:"http://www.stumbleupon.com/submit?",ios:"http://www.stumbleupon.com/submit?",operators:k,metaTags:{url:"url"}}},xing:{type:"xing",text:"Xing",icon:n.faXing,color:"#006567",share:{desktop:"https://www.xing.com/app/user?op=share&",android:"https://www.xing.com/app/user?op=share&",ios:"https://www.xing.com/app/user?op=share&",operators:k,metaTags:{url:"url"}}},sms:{type:"sms",text:"SMS",icon:i.faCommentAlt,color:"#20c16c",share:{desktop:"sms:?",android:"sms:?",ios:"sms:?",metaTags:{description:"body"},operators:b(O,k)}},email:{type:"email",text:"Email",icon:i.faEnvelope,color:"#FF961C",share:{desktop:"mailto:?",android:"mailto:?",ios:"mailto:?",operators:b(O,k),metaTags:{title:"subject",description:"body"}}},copy:{type:"copy",text:"Copy link",successText:"Copied",successIcon:i.faCheck,failText:"Error",failIcon:i.faExclamation,icon:i.faLink,color:"#607D8B",share:{operators:S}},print:{type:"print",text:"Print",icon:i.faPrint,color:"#765AA2",share:{operators:j}}},R=function(){function t(t){this.config={prop:B,options:{theme:"default",include:[],exclude:[],size:0,url:undefined,title:undefined,description:undefined,image:undefined,tags:undefined,twitterAccount:undefined,autoSetMeta:!0,gaTracking:!1,windowWidth:800,windowHeight:500}},this.config$=new s.BehaviorSubject(this.config),t&&this.setConfig(t)}return Object.defineProperty(t.prototype,"prop",{get:function(){return this.config.prop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"twitterAccount",{get:function(){return this.config.options.twitterAccount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.config.options.theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowSize",{get:function(){return"width="+this.config.options.windowWidth+", height="+this.config.options.windowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.config.options.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.config.options.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.config.options.description},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this.config.options.image},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tags",{get:function(){return this.config.options.tags},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSetMeta",{get:function(){return this.config.options.autoSetMeta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gaTracking",{get:function(){return this.config.options.gaTracking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.config.options.size},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t){this.config=v(this.config,t),this.config$.next(this.config)},t.prototype.addButton=function(t,e){var r,o={prop:Object.assign({},B,(r={},r[t]=e,r))};this.setConfig(o)},t}();R.decorators=[{type:e.Injectable}],R.ctorParameters=function(){return[{type:undefined,decorators:[{type:e.Inject,args:[y]}]}]};var M=function(){function t(t,r,o,n,i,s){this.shareService=t,this.http=r,this.renderer=o,this.cd=n,this.el=i,this.platform=s,this.getCount=!1,this.autoSetMeta=this.shareService.autoSetMeta,this.url=this.shareService.url,this.title=this.shareService.title,this.description=this.shareService.description,this.image=this.shareService.image,this.tags=this.shareService.tags,this.count=new e.EventEmitter,this.opened=new e.EventEmitter,this.closed=new e.EventEmitter}return t.prototype.onClick=function(){var t,e,r=this;if(a.isPlatformBrowser(this.platform)){var o=this.autoSetMeta?{url:this.url,title:this.title||x("og:title"),description:this.description||x("og:description"),image:this.image||x("og:image"),via:this.shareService.twitterAccount||x("twitter:site"),tags:this.tags}:{url:this.url,title:this.title,description:this.description,image:this.image,tags:this.tags,via:this.shareService.twitterAccount},n={cd:this.cd,renderer:this.renderer,prop:this.prop,el:this.el.nativeElement,os:(t=navigator.userAgent||navigator.vendor||window.opera,/android/i.test(t)?"android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"ios":"desktop"),metaTags:o};(e=f.of(n)).pipe.apply(e,b(this.prop.share.operators,[h.tap(function(t){return r.share(t)}),u.take(1)])).subscribe()}},t.prototype.ngOnChanges=function(t){var e=this;a.isPlatformBrowser(this.platform)&&(t.shareButton&&(t.shareButton.firstChange||t.shareButton.previousValue!==this.shareButton)&&this.createShareButton(this.shareButton),(!this.url||t.url&&t.url.previousValue!==this.url)&&f.of(null).pipe(r.map(function(){return e.url=function(t,e){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[ShareButtons]: Sharing link '"+t+"' is invalid!")}return e}(e.autoSetMeta?e.url||x("og:url"):e.url,window.location.href),e.url}),d.filter(function(){return e.prop.count&&e.getCount}),l.switchMap(function(t){return e.shareCount(t)}),h.tap(function(t){return e.count.emit(t)}),u.take(1)).subscribe())},t.prototype.share=function(t){var e=this;if(t){this.shareService.gaTracking&&"undefined"!=typeof ga&&ga("send","social",this.prop.type,"click",this.url),this.opened.emit(this.prop.type);var r=window.open(t,"newwindow",this.shareService.windowSize);if(r)var o=window.setInterval(function(){r.closed&&(window.clearInterval(o),e.closed.emit(e.prop.type))},200)}},t.prototype.shareCount=function(t){return"jsonp"===this.prop.count.request?(e=this.http.jsonp(this.prop.count.url+t,"callback")).pipe.apply(e,b(this.prop.count.operators,[c.catchError(function(){return m.empty()})])):(r=this.http.get(this.prop.count.url+t,this.prop.count.args)).pipe.apply(r,b(this.prop.count.operators,[c.catchError(function(){return m.empty()})]));var e,r},t.prototype.createShareButton=function(t){var e=Object.assign({},this.shareService.prop[t]);if(!e)throw new Error("[ShareButtons]: The share button '"+t+"' does not exist!");this.prop=e,this.renderer.removeClass(this.el.nativeElement,"sb-"+this.buttonClass),this.renderer.addClass(this.el.nativeElement,"sb-"+e.type),this.el.nativeElement.style.setProperty("--button-color",this.prop.color),this.buttonClass=e.type},t}();M.decorators=[{type:e.Directive,args:[{selector:"[shareButton]"}]}],M.ctorParameters=function(){return[{type:R},{type:p.HttpClient},{type:e.Renderer2},{type:e.ChangeDetectorRef},{type:e.ElementRef},{type:Object,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},M.propDecorators={shareButton:[{type:e.Input}],getCount:[{type:e.Input}],autoSetMeta:[{type:e.Input}],url:[{type:e.Input}],title:[{type:e.Input}],description:[{type:e.Input}],image:[{type:e.Input}],tags:[{type:e.Input}],count:[{type:e.Output}],opened:[{type:e.Output}],closed:[{type:e.Output}],onClick:[{type:e.HostListener,args:["click"]}]};var q=function(){function t(){}return t.prototype.transform=function(t,e){return function(t,e){for(var r=[{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}],o=/\.0+$|(\.[0-9]*[1-9])0+$/,n=0;n<r.length;n++)if(t>=r[n].value)return(t/r[n].value).toFixed(e).replace(o,"$1")+r[n].symbol;return t.toFixed(e).replace(o,"$1")}(t,e)},t}();function E(t){return new R(t)}q.decorators=[{type:e.Pipe,args:[{name:"shareCount"}]}],q.ctorParameters=function(){return[]};var A=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:y,useValue:e},{provide:R,useFactory:E,deps:[y]}]}},t}();A.decorators=[{type:e.NgModule,args:[{declarations:[M,q],exports:[M,q]}]}],A.ctorParameters=function(){return[]},t.ShareButtonsFactory=E,t.ShareModule=A,t.CONFIG=y,t.ShareButtons=R,t.ShareButtonDirective=M,t.ShareCountPipe=q,t.shareButtonsProp=B,t.metaTagsOperators=k,t.printOperators=j,t.copyOperators=S,t.urlInMessageOperators=O,t.FacebookCountOperators=T,t.PinterestCountOperators=C,t.TumblrCountOperators=P,t.RedditCountOperators=I,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-share-core.umd.min.js.map
